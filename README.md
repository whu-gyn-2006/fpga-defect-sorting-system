# 交互式三维视觉缺陷分拣系统

![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)

本项目是一个完整的、开源的**《交互式三维视觉缺陷分拣系统》**，基于 **Pango 100pro FPGA** 开发板，核心逻辑采用 **Verilog HDL** 编写。项目旨在为学习者与开发者提供一个从图像采集到自动分拣的端到端硬件加速参考设计，完整地展示了一个低延迟、高精度的闭环智能控制系统。

## ✨ 核心功能 (Features)

*   **🚀 全流程硬件加速：** 从图像采集、预处理、算法分析到外设控制，所有环节均在FPGA硬件中以流水线方式执行，实现毫秒级端到端延迟。
*   **👁️ 三维融合定位：** 实时融合 **OV5640摄像头** 的二维图像与 **TFMini-Plus激光雷达** 的深度数据，精确解算工件在物理世界中的 (X, Y, Z) 坐标。
*   **🎯 双级精准缺陷检测：** 采用创新的 **“双级连通域分析”** 算法，先通过全局分析锁定工件本体，再在工件内部进行局部扫描，精确定位微小缺陷。
*   **🤖 闭环自动分拣：** 一旦检测到缺陷，内置的自动化状态机将无缝接管，精确驱动舵机（模拟机械臂）完成 **识别、延时、剔除** 等一系列分拣动作。
*   **🖥️ 多维人机交互：**
    *   通过 **HDMI OSD** 将追踪框、三维坐标、系统状态等信息实时叠加在视频流上。
    *   通过 **双向UART** 接口向上位机发送详细日志，并可接收外部控制指令。
    *   集成了 **蜂鸣器与LED** 模块，对缺陷或位置异常进行实时声光报警。

## 🛠️ 硬件清单 (Hardware Requirements)

- **FPGA 主控平台:** 盘古100pro  FPGA 开发板
- **视觉采集模块:** OV5640 CMOS 摄像头模组 (及配套FMC子卡)
- **三维测距传感器:** TFMini-Plus 激光雷达传感器
- **执行机构:** PWM控制舵机
- **报警单元:** 3V 无源蜂鸣器模块
- **显示界面:** 标准HDMI接口高清显示器
- **机械结构:** 亚克力定制框架、3D打印样品等

## 📦 软件与工具链 (Software & Toolchain)

- **FPGA 开发环境:** Pango Design Suite (PDS) V2023.2 

## 🚀 快速开始 (Getting Started)


1.  **硬件连接**
    - 将OV5640摄像头模组连接到FMC子卡，并将子卡插入FPGA主板。
    - 按照引脚定义，将激光雷达、舵机、蜂鸣器连接至FPGA的GPIO引脚。
    - 通过HDMI线连接FPGA与显示器。
    - 连接FPGA电源和JTAG下载器。

2.  **编译与烧录**
    - 使用Pango Design Suite打开项目工程文件 (`.prg`)。
    - 运行完整的“综合 (Synthesis)”、“实现 (Implementation)”流程，生成比特流文件 (`.sbit`)。
    - 使用PDS内置的Programmer工具，将生成的 `.sbit` 文件烧录到FPGA中。

3.  **系统操作**
    - 上电后，系统将自动初始化，并在HDMI显示屏上呈现实时视频流。
    - **正常样品** 将被红框锁定并顺利通过传送带。
    - **缺陷样品** 将被红框和蓝框同时锁定，并触发声光报警与自动分拣动作。
    - 可通过板载按键切换系统状态（如实时模式、冻结分析模式等）。

## 📁 项目结构 (Project Structure)

```
.
├── source/          # Verilog HDL 源代码 (顶层模块、图像处理IP、控制器等)
│   ├── top_module.v
│   └── ...
├── constraint/   # 时序与引脚约束文件 (.pdc)
│   └── constraints.pdc
├── LICENSE       # MIT 许可证
└── README.md     # 本说明文件
```


## 📄 开源许可证 (License)

本项目采用 **MIT License** 开源。详情请见 [LICENSE](LICENSE) 文件。

## 🤝 贡献与交流 (Contributing)

欢迎对本项目进行Star、Fork。如果您有任何问题或改进建议，请随时提交 Pull Request 或在 Issues 中进行讨论。
